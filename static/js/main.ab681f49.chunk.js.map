{"version":3,"sources":["components/book-form/book-form.module.scss","components/nav/nav.module.scss","components/text-input/text-input.module.scss","components/img-input/img-input.module.scss","components/star/star.module.scss","components/book-preview/book-preview.module.scss","app/app.module.scss","components/rating/rating.module.scss","context/book-context.tsx","components/nav/index.tsx","components/star/index.tsx","components/rating/index.tsx","components/book-preview/index.tsx","components/book-list/index.tsx","pages/main.tsx","components/text-input/index.tsx","components/img-input/index.tsx","components/book-form/controls.tsx","components/book-form/validations/author-validation.tsx","components/book-form/validations/desc-validation.tsx","components/book-form/validations/isbn-validation.tsx","components/book-form/validations/title-validation.tsx","components/book-form/validations/year-validation.tsx","components/book-form/index.tsx","pages/add-book.tsx","pages/book.tsx","app/index.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","form","btn","list","link","label","input","active","invalid","wrapper","img","star","button","header","BookContext","React","createContext","books","ISBN","author","cover","description","rating","title","year","addBook","updateBook","Nav","react_default","a","createElement","className","style","item","react_router_dom","to","Star","props","value","onClick","onMouseEnter","onMouseLeave","disabled","type","cn","Object","defineProperty","height","width","viewBox","points","fillRule","Rating","_props$value","editing","onDataChange","_useState","useState","_useState2","slicedToArray","hoverRating","setHoverRating","useEffect","newValue","map","num","key","BookPreview","_props$book","book","id","concat","components_rating","BookList","book_preview","Main","context","useContext","book_list","TextInput","_cn","name","data","valid","placeholder","isValid","setIsValid","onChange","e","target","autoComplete","ImgInput","reader","FileReader","onload","url","result","files","readAsDataURL","src","process","alt","Controls","creating","setEditing","onAdd","onUpdate","authorValidation","test","descValidation","ISBNValidation","titleValidation","yearValidation","nullData","undefined","BookForm","_props$data","_props$creating","history","_useState3","_useState4","state","setState","_useState5","_useState6","setValid","temp","objectSpread","validateFields","img_input","text_input","controls","checkObj","values","some","check","push","AddBook","book_form","Book","setBook","match","params","find","Number","App","setBooks","currentId","setCurrentId","fetchBooks","_ref","asyncToGenerator","regenerator_default","mark","_callee","_ref2","newBooks","wrap","_context","prev","next","fetch","then","res","json","sent","abrupt","stop","apply","this","arguments","getLocalBooks","cachedHits","localStorage","getItem","JSON","parse","_ref3","_callee2","idx","_context2","length","getBooks","book_context","Provider","index","findIndex","toConsumableArray","slice","setItem","stringify","newBook","nav","react_router","exact","path","component","Boolean","window","location","hostname","ReactDOM","render","basename","app","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ab681f49.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"book-form_form__109pN\",\"btn\":\"book-form_btn__24vMw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"nav_list__3eaUr\",\"link\":\"nav_link__29t6Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"text-input_label__aiVIM\",\"input\":\"text-input_input__3wLgX\",\"active\":\"text-input_active__3qKDn\",\"invalid\":\"text-input_invalid__HTS7S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"img-input_wrapper__2Kx8w\",\"input\":\"img-input_input__2-iqv\",\"label\":\"img-input_label__2uLef\",\"active\":\"img-input_active__3t-NA\",\"img\":\"img-input_img__1a-rm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"star_input__35vX-\",\"star\":\"star_star__3oq9L\",\"button\":\"star_button__xcTj0\",\"active\":\"star_active__1iIas\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"book-preview_link__2hKZJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"app_wrapper__35_xq\",\"header\":\"app_header__2UDB5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"rating_wrapper__28Vyy\"};","import React from 'react'\n\nexport interface IBook {\n  ISBN: string,\n  author: string,\n  cover?: string,\n  description: string,\n  rating?: number,\n  title: string,\n  year?: string,\n  id?: number\n}\n\ninterface IContext {\n  books: IBook[],\n  addBook: (data: IBook) => void,\n  updateBook: (data: IBook, id: number) => void\n}\n\nconst BookContext = React.createContext<IContext>({\n  books: [\n    {\n      ISBN: '',\n      author: '',\n      cover: 'localhost:3000/img/1.jpg',\n      description: '',\n      rating: 3,\n      title: '',\n      year: '2000'\n    },\n    {\n      ISBN: '',\n      author: '',\n      description: '',\n      title: '',\n      year: '2000'\n    }\n  ],\n  addBook: () => undefined,\n  updateBook: () => undefined\n})\n\nexport default BookContext\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport style from './nav.module.scss'\n\nconst Nav = () => {\n  return (\n    <ul className={ style.list }>\n      <li className={ style.item }><Link to='/' className={ style.link }>Главная страница</Link></li>\n      <li className={ style.item }><Link to='/add-book' className={ style.link }>Добавить книгу</Link></li>\n    </ul>\n  )\n}\n\nexport default Nav\n","import React from 'react'\nimport style from './star.module.scss'\nimport cn from 'classnames'\n\ninterface IProps {\n  value: number,\n  onClick: (value: number) => void,\n  onMouseEnter: (value: number) => void,\n  onMouseLeave: () => void,\n  active: boolean,\n  disabled: boolean\n}\n\nconst Star = (props: IProps) => {\n  const { value, onClick, onMouseEnter, onMouseLeave, active, disabled } = props\n\n  const onButtonClick = () => onClick(value)\n  const onButtonEnter = () => onMouseEnter(value)\n  const onButtonLeave = () => onMouseLeave()\n\n  return (\n    <button\n      type='button'\n      value={ value }\n      onClick={ onButtonClick }\n      className={ cn(style.button, { [style.active]: active }) }\n      disabled={ disabled }\n      onMouseEnter={ onButtonEnter }\n      onMouseLeave={ onButtonLeave }\n    >\n      <svg height='25' width='23' viewBox='0 0 20 19' className={ style.star }>\n        <polygon\n          points='9.9, 0, 3.3, 20.7, 19.8, 7.5, 0, 7.5, 16.5, 20.7'\n          style={ { fillRule: `nonzero` } }\n        />\n      </svg>\n    </button>\n  )\n}\n\nexport default Star\n","import React, { useState, useEffect } from 'react'\nimport Star from '../star'\nimport style from './rating.module.scss'\n\ninterface IProps {\n  value: number | undefined,\n  editing?: boolean,\n  onDataChange?: (name: string, value: number) => void\n}\n\nconst Rating = (props: IProps) => {\n  const { value = 0, editing, onDataChange } = props\n  const [ hoverRating, setHoverRating ] = useState(value)\n\n  useEffect(() => {\n    setHoverRating(value)\n  }, [value])\n\n  const onClick = (newValue: number) => {\n    onDataChange && onDataChange(`rating`, newValue)\n  }\n\n  const onMouseEnter = (newValue: number) => {\n    if (!editing) {\n      return\n    }\n    setHoverRating(newValue)\n  }\n\n  const onMouseLeave = () => {\n    if (!editing) {\n      return\n    }\n    setHoverRating(value)\n  }\n\n  const renderStars = () => {\n    const arr = [1, 2, 3, 4, 5]\n    return arr.map((num) => (\n      <Star\n        key={ num }\n        onClick={ onClick }\n        onMouseEnter={ onMouseEnter }\n        onMouseLeave={ onMouseLeave }\n        value={ num }\n        active={ hoverRating >= num }\n        disabled={ !editing }\n      />\n    ))\n  }\n\n  return (\n    <div className={ style.wrapper }>\n      { renderStars() }\n    </div>\n  )\n}\n\nexport default Rating\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Rating from '../rating'\nimport style from './book-preview.module.scss'\nimport { IBook } from 'Context/book-context'\n\ninterface IProps {\n  book: IBook\n}\n\nconst BookPreview = (props: IProps) => {\n  const { book: { id, rating, title } } = props\n  return (\n    <Link to={ `/${id}` } className={ style.link }>\n      <h3 className={ style.title }>{ title }</h3>\n      { rating && <Rating value={ rating } /> }\n    </Link>\n  )\n}\n\nexport default BookPreview\n","import React from 'react'\nimport BookPrewiew from '../book-preview'\nimport { IBook } from 'Context/book-context'\n\ninterface IProps {\n  books: IBook[]\n}\n\nconst BookList = (props: IProps) => {\n  const renderList = () => {\n    return props.books.map((book) => {\n      return <li key={ book.id }><BookPrewiew book={ book }/></li>\n    })\n  }\n\n  return <ul className='list'>{ renderList() }</ul>\n}\n\nexport default BookList\n","import React, { useContext } from 'react'\nimport BookList from '../components/book-list'\nimport BookContext from 'Context/book-context'\n\nconst Main = () => {\n  const context = useContext(BookContext)\n\n  return (\n    <div>\n      <BookList books={ context.books } />\n    </div>\n  )\n}\n\nexport default Main\n","import React, { useState, useEffect, ChangeEvent } from 'react'\nimport style from './text-input.module.scss'\nimport cn from 'classnames'\n\ninterface IProps {\n  name: string,\n  data: string | undefined,\n  editing: boolean,\n  onDataChange: (name: string, value: string) => void,\n  valid: boolean,\n  placeholder: string\n}\n\nconst TextInput = (props: IProps) => {\n  const { name, data, editing, onDataChange, valid, placeholder } = props\n  const [ isValid, setIsValid ] = useState(true)\n\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    onDataChange(name, e.target.value)\n    if (!isValid) setIsValid(true)\n  }\n\n  useEffect(() => {\n    setIsValid(valid)\n  }, [valid])\n\n  return (\n    <label className={ style.label }>\n      <span className={ style.name }>{ name }</span>\n      <input\n        className={ cn(style.input, { [style.invalid]: !isValid, [style.active]: editing }) }\n        type='text'\n        name={ name }\n        value={ data }\n        disabled={ !editing }\n        onChange={ onChange }\n        placeholder={ placeholder }\n        autoComplete='off'\n      />\n    </label>\n  )\n}\n\nexport default TextInput\n","import React from 'react'\nimport style from './img-input.module.scss'\nimport cn from 'classnames'\n\ninterface IProps {\n  name: string,\n  editing: boolean,\n  onDataChange: (name: string, url: any) => void,\n  img: string | undefined\n}\n\nconst ImgInput = (props: IProps) => {\n  const { name, editing, onDataChange, img } = props\n  const onImgUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const input = e.target\n    const reader = new FileReader()\n\n    reader.onload = () => {\n      const url = reader.result\n      onDataChange(name, url)\n    }\n\n    input.files && reader.readAsDataURL(input.files[0])\n  }\n\n  const noImage = process.env.PUBLIC_URL + '/no-img.svg'\n\n  return (\n    <div className={ style.wrapper }>\n      <label className={ cn(style.label, { [style.active]: editing }) }>\n        <input\n          type='file'\n          name='img'\n          id='img-input'\n          className={ style.input }\n          onChange={ onImgUpload }\n          disabled={ !editing }\n        />\n      </label>\n      <img src={ img || noImage } alt={ name } className={ style.img }/>\n    </div>\n  )\n}\n\nexport default ImgInput\n","import React from 'react'\nimport style from './book-form.module.scss'\n\ninterface IProps {\n  editing: boolean,\n  creating: boolean,\n  setEditing: (arg: boolean) => void,\n  onAdd: () => void,\n  onUpdate: () => void\n}\n\nconst Controls = (props: IProps) => {\n  const { editing, creating, setEditing, onAdd, onUpdate } = props\n\n  if (creating) {\n    return (\n      <button type='button' onClick={ onAdd } className={ style.btn }>\n        Добавить книгу\n      </button>\n    )\n  } else if (editing) {\n    return (\n      <button type='button' onClick={ onUpdate } className={ style.btn }>\n        Сохранить изменения\n      </button>\n    )\n  } else {\n    const onSetEditing = () => setEditing(true)\n    return (\n      <button type='button' onClick={ onSetEditing } className={ style.btn }>\n        Редактировать книгу\n      </button>\n    )\n  }\n}\n\nexport default Controls\n","const authorValidation = (value: string) => {\n  const regexp = /[A-Z]/gi\n  return regexp.test(value)\n}\n\nexport default authorValidation\n","const descValidation = (value: string) => {\n  const regexp = /[A-Z]/gi\n  return regexp.test(value)\n}\n\nexport default descValidation\n","const ISBNValidation = (value: string) => {\n  // const regexp = /^(?:ISBN(?:-1[03])?:? )?(?=[0-9X]{10}$|(?=(?:[0-9]+[- ]){3})\n  // [- 0-9X]{13}$|97[89][0-9]{10}$|(?=(?:[0-9]+[- ]){4})[- 0-9]{17}$)\n  // (?:97[89][- ]?)?[0-9]{1,5}[- ]?[0-9]+[- ]?[0-9]+[- ]?[0-9X]$/\n  const regexp = /^\\d{4}$/\n  return regexp.test(value)\n}\n\nexport default ISBNValidation\n","const titleValidation = (value: string) => {\n  const regexp = /[A-Z]/gi\n  return regexp.test(value)\n}\n\nexport default titleValidation\n","const yearValidation = (value: string) => {\n  const regexp = /^\\d{4}$/\n  return regexp.test(value)\n}\n\nexport default yearValidation\n","import React, { useEffect, useState, useContext } from 'react'\nimport TextInput from '../text-input'\nimport ImgInput from '../img-input'\nimport BookContext, { IBook } from 'Context/book-context'\nimport Rating from '../rating'\nimport Controls from './controls'\nimport style from './book-form.module.scss'\nimport {\n  authorValidation,\n  descValidation,\n  ISBNValidation,\n  titleValidation,\n  yearValidation\n} from './validations'\n\nimport { History } from 'history'\n\ninterface IProps {\n  data?: IBook,\n  creating?: boolean,\n  history: History\n}\n\nconst nullData = {\n  title: '',\n  description: '',\n  author: '',\n  ISBN: '',\n  year: '',\n  cover: undefined,\n  id: 0,\n  rating: undefined\n}\n\nconst BookForm = (props: IProps) => {\n  const { data = nullData, creating = false, history } = props\n\n  const [editing, setEditing] = useState(creating)\n  const [state, setState] = useState(data)\n  const [valid, setValid] = useState({\n    title: true,\n    description: true,\n    ISBN: true,\n    author: true,\n    year: true\n  })\n  const context = useContext(BookContext)\n\n  useEffect(() => {\n    setState(data)\n  }, [data])\n\n  const onDataChange = (name: string, value: string | number) => {\n    const temp = { ...state, [name]: value }\n    setState(temp)\n  }\n\n  const validateFields = () => {\n    return {\n      author: authorValidation(state.author),\n      description: descValidation(state.description),\n      ISBN: ISBNValidation(state.ISBN),\n      title: titleValidation(state.title),\n      year: state.year ? yearValidation(state.year) : true\n    }\n  }\n\n  const onAdd = () => {\n    const checkObj = validateFields()\n    const error = Object.values(checkObj).some((check) => check === false)\n    if (!error) {\n      context.addBook(state)\n      history.push(`/`)\n    } else {\n      setValid(checkObj)\n    }\n  }\n\n  const onUpdate = () => {\n    const checkObj = validateFields()\n    const error = Object.values(checkObj).some((check) => check === false)\n    if (!error) {\n      state.id && context.updateBook(state, state.id)\n      history.push(`/`)\n    } else {\n      setValid(checkObj)\n    }\n  }\n\n  return (\n    <form className={ style.form }>\n      <ImgInput\n        img={ state.cover }\n        name='cover'\n        editing={ editing }\n        onDataChange={ onDataChange }\n      />\n      <TextInput\n        name='title'\n        data={ state.title }\n        editing={ editing }\n        onDataChange={ onDataChange }\n        valid={ valid.title }\n        placeholder='Title'\n      />\n      <TextInput\n        name='description'\n        data={ state.description }\n        editing={ editing }\n        onDataChange={ onDataChange }\n        valid={ valid.description }\n        placeholder='Description'\n      />\n      <TextInput\n        name='author'\n        data={ state.author }\n        editing={ editing }\n        onDataChange={ onDataChange }\n        valid={ valid.author }\n        placeholder='Author'\n      />\n      <TextInput\n        name='ISBN'\n        data={ state.ISBN }\n        editing={ editing }\n        onDataChange={ onDataChange }\n        valid={ valid.ISBN }\n        placeholder='1234'\n      />\n      <TextInput\n        name='year'\n        data={ state.year }\n        editing={ editing }\n        onDataChange={ onDataChange }\n        valid={ valid.year }\n        placeholder='2000'\n      />\n      <Rating\n        value={ state.rating }\n        editing={ editing }\n        onDataChange={ onDataChange }\n      />\n      <Controls\n        creating={ creating }\n        editing={ editing }\n        setEditing={ setEditing }\n        onAdd={ onAdd }\n        onUpdate={ onUpdate }\n      />\n    </form>\n  )\n}\n\nexport default BookForm\n","import React from 'react'\nimport BookForm from '../components/book-form'\nimport { History } from 'history'\n\ninterface IProps {\n  history: History\n}\n\nconst AddBook = (props: IProps) => {\n  return <BookForm creating={ true } history={ props.history } />\n}\n\nexport default AddBook\n","import React, { useState, useContext, useEffect } from 'react'\nimport BookForm from '../components/book-form'\nimport BookContext, { IBook } from 'Context/book-context'\nimport { RouteComponentProps } from 'react-router'\n\ninterface IProps extends RouteComponentProps<MatchParams> {}\n\ntype MatchParams = {\n  id: string\n}\n\nconst Book = (props: IProps) => {\n  const [ book, setBook ] = useState<IBook | null>(null)\n  const context = useContext(BookContext)\n  const id = props.match.params.id\n\n  useEffect(() => {\n    const temp = context.books.find((item) => Number(item.id) === Number(id))\n    temp && setBook(temp)\n  }, [context.books, id])\n\n  return book && <BookForm data={ book } history={ props.history } />\n}\n\nexport default Book\n","import React, { useState, useEffect } from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport BookContext, { IBook } from 'Context/book-context'\nimport Nav from '../components/nav'\nimport Main from '../pages/main'\nimport AddBook from '../pages/add-book'\nimport Book from '../pages/book'\nimport style from './app.module.scss'\n\nconst App = () => {\n  const [ books, setBooks ] = useState<IBook[] | []>([])\n  const [ currentId, setCurrentId ] = useState(0)\n\n  const fetchBooks = async () => {\n    const url = process.env.PUBLIC_URL + '/books.json'\n    const { newBooks } = await fetch(url).then((res) => res.json())\n    return newBooks\n  }\n\n  const getLocalBooks = () => {\n    const cachedHits = localStorage.getItem(`books`)\n    const temp = cachedHits ? JSON.parse(cachedHits) : null\n    return temp\n  }\n\n  const addBook = (data: IBook) => {\n    const temp = [ ...books ]\n    const newBook = { ...data, id: currentId }\n    temp.push(newBook)\n    setCurrentId(currentId + 1)\n    setBooks(temp)\n    localStorage.setItem(`books`, JSON.stringify(temp))\n  }\n\n  const updateBook = (data: IBook, id: number) => {\n    const index = books.findIndex((book) => book.id === id)\n    const temp = [\n      ...books.slice(0, index),\n      data,\n      ...books.slice(index + 1)\n    ]\n    setBooks(temp)\n    localStorage.setItem(`books`, JSON.stringify(temp))\n  }\n\n  useEffect(() => {\n    const getBooks = async () => {\n      let newBooks = getLocalBooks()\n      if (!newBooks) {\n        newBooks = await fetchBooks()\n      }\n\n      setBooks(newBooks)\n      const idx = newBooks[newBooks.length - 1].id + 1\n      setCurrentId(idx)\n    }\n\n    getBooks()\n  }, [])\n\n  return (\n    <BookContext.Provider value={ {\n      books,\n      updateBook,\n      addBook\n    } }>\n      <div className={ style.wrapper }>\n        <header className={ style.header }>\n          <Nav />\n        </header>\n        <main>\n          <Switch>\n            <Route exact={ true } path='/' component={ Main } />\n            <Route path='/add-book' component={ AddBook } />\n            <Route path='/:id' component={ Book } />\n          </Switch>\n        </main>\n      </div>\n    </BookContext.Provider>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\n\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './app'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <BrowserRouter basename={ process.env.PUBLIC_URL }>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}